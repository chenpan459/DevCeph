🧩 一、Ceph 是什么？

Ceph 是一个统一的、分布式、高可用、高可靠的存储系统，
支持三种接口：

模式	对应接口	说明
对象存储	RADOS / RGW	RESTful (S3 / Swift) 访问
块存储	RBD	虚拟机或容器块设备
文件存储	CephFS	POSIX 文件系统挂载


⚙️ 二、总体架构图
                   +---------------------------+
                   |     用户访问接口层        |
                   |---------------------------|
                   |  CephFS | RBD | RGW (S3)  |
                   +---------------------------+
                                  ↓
                   +---------------------------+
                   |        RADOS 层（核心）   |
                   |---------------------------|
                   |  ObjectStore / CRUSH / OSD |
                   +---------------------------+
                    ↓           ↓           ↓
          +------------+ +------------+ +------------+
          |   OSD 1    | |   OSD 2    | |   OSD 3    |
          +------------+ +------------+ +------------+
                    ↘           ↙
                     +----------------------+
                     |   MON / MGR / MDS    |
                     +----------------------+


🧱 三、核心组件
| 组件                              | 作用                     | 类似角色     |
| ------------------------------- | ---------------------- | -------- |
| **MON (Monitor)**               | 管理集群元数据、监控状态、选主        | 分布式控制中心  |
| **MGR (Manager)**               | 监控性能指标、负载、dashboard 管理 | 管理平面     |
| **OSD (Object Storage Daemon)** | 存储实际数据对象，负责复制、恢复       | 数据节点     |
| **MDS (Metadata Server)**       | 仅在 CephFS 使用，管理文件元数据   | 文件系统目录管理 |
| **RGW (RADOS Gateway)**         | 对象存储接口（S3/Swift 兼容）    | API 服务层  |



🧠 四、底层核心：RADOS（Reliable Autonomic Distributed Object Store）
RADOS 是 Ceph 的“分布式对象存储内核”。
上层所有功能（文件、块、对象）都基于 RADOS 提供的 API 实现。
RADOS 功能：
自动数据分布（CRUSH 算法）
副本与故障恢复
事务与一致性保障
去中心化设计（无单点故障）


📦 六、数据存储流程（RADOS 层）
以写入一个对象为例：
Client
  ↓
librados（客户端库）
  ↓
PG（Placement Group）
  ↓
Primary OSD（主副本）
  ↓
Replica OSDs（副本）
  ↓
Local Store（BlueStore / SeaStore）
